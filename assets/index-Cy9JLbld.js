import{G as P,B as H,S as R}from"./runtime-DPWUjJdk.js";const k=[{id:"career-professional-development",label:"Career & Professional Development",description:"Support students & other alumni with career decisions, resumes, interviews, leadership, and professional growth."},{id:"technical-domain-expertise",label:"Technical & Domain Expertise",description:"Share engineering, technology, and domain-specific knowledge across core IITB disciplines."},{id:"entrepreneurship-innovation",label:"Entrepreneurship & Innovation",description:"Mentor students and teams on startups, ideas, fundraising, and go-to-market thinking."},{id:"research-academia-support",label:"Research & Academia Support",description:"Guide research methodology, paper reviews, academic writing, guest lectures, and proposal development."},{id:"social-impact-sustainability",label:"Social Impact & Sustainability",description:"Contribute expertise to social entrepreneurship, NGOs, education, and sustainability projects."},{id:"life-skills-mindset",label:"Life Skills & Mindset",description:"Help build critical thinking, decision-making skills, teamwork, and personal resilience."},{id:"program-platform-roles",label:"Program & Platform Roles",description:"Participate as workshop leaders, co-designers of programs, and volunteers supporting TimeBank operations."}];let m=null,c=!1;const x=document.getElementById("view-landing"),g=document.getElementById("view-app"),V=document.querySelectorAll("[data-gsi-button]"),_=document.getElementById("busy-overlay"),A=document.getElementById("busy-message"),L=document.querySelector("[data-landing-nav]"),w=document.querySelectorAll("[data-contrib-button]"),b=document.querySelectorAll("[data-contrib-link]"),h=document.querySelector("[data-account-chip]"),C=document.querySelector("[data-account-email]"),z=document.querySelectorAll("[data-signout]"),K=document.querySelectorAll("[data-home]"),N=document.querySelectorAll(".icon-button[data-home]"),r=document.querySelector("[data-signout-icon]"),d=document.querySelector("[data-menu-toggle]"),i=document.querySelector("[data-menu-panel]"),s=document.getElementById("signout-modal"),q=document.querySelector("[data-signout-confirm]"),T=document.querySelector("[data-signout-cancel]"),B=document.querySelectorAll("[data-landing-only]");document.querySelectorAll("[data-scroll]").forEach(e=>{e.addEventListener("click",n=>{const t=n.currentTarget.getAttribute("data-scroll"),o=document.querySelector(t);o&&o.scrollIntoView({behavior:"smooth"})})});K.forEach(e=>{e.addEventListener("click",n=>{n.preventDefault(),u(),G(),window.scrollTo({top:0,behavior:"smooth"})})});w.forEach(e=>{e.addEventListener("click",()=>{u(),v(),window.scrollTo({top:0,behavior:"smooth"})})});b.forEach(e=>{e.addEventListener("click",()=>{v(),window.scrollTo({top:0,behavior:"smooth"})})});d&&i&&(d.addEventListener("click",e=>{e.stopPropagation(),j(),i.classList.toggle("hidden")}),document.addEventListener("click",e=>{!i.classList.contains("hidden")&&!i.contains(e.target)&&e.target!==d&&i.classList.add("hidden")}));z.forEach(e=>{e.addEventListener("click",()=>{s&&s.classList.remove("hidden"),u()})});r&&r.addEventListener("click",()=>{s&&s.classList.remove("hidden")});T&&T.addEventListener("click",()=>{s&&s.classList.add("hidden")});q&&q.addEventListener("click",()=>{s&&s.classList.add("hidden"),m=null,sessionStorage.removeItem("timebank_token"),E(!1),G()});window.handleCredentialResponse=e=>{m=e.credential,sessionStorage.setItem("timebank_token",m),f(!0,"Signing you in…"),S("login_and_fetch_view",{}).then(O).catch(M).finally(()=>f(!1))};p();J();const I=sessionStorage.getItem("timebank_token");I?(m=I,f(!0,"Loading your dashboard…"),S("login_and_fetch_view",{}).then(O).catch(e=>{sessionStorage.removeItem("timebank_token"),E(!1),M(e)}).finally(()=>f(!1))):E(!1);function p(){if(window.google&&google.accounts&&google.accounts.id){google.accounts.id.initialize({client_id:P,callback:handleCredentialResponse,auto_select:!1,use_fedcm_for_prompt:!0}),V.forEach(e=>{const n=e.dataset.gsiSize||"large",t=e.dataset.gsiText||"continue_with",o=n==="medium"?160:260;google.accounts.id.renderButton(e,{type:"standard",size:n,width:o,theme:"outline",text:t,shape:"pill",logo_alignment:"left"})});return}if(p.attempts>30){console.error("Google Identity Services failed to load.");return}p.attempts+=1,setTimeout(p,250)}p.attempts=0;function O(e){if(e.error)throw new Error(e.error);if(!e.html)throw new Error("Missing app view");const n=document.createRange();n.selectNode(document.body);const t=n.createContextualFragment(e.html);g.innerHTML="",g.appendChild(t);const o=g.querySelector("#user-email");E(!0,o?o.textContent:F(m)),v(),window.google=window.google||{},window.google.script={run:{withSuccessHandler:a=>({withFailureHandler:l=>({proxyApiCall:(y,D)=>{S(y,D).then(a).catch(l)}})})}}}async function S(e,n){const t={action:e,sharedKey:R,credential:m,...n},a=await(await fetch(H,{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"text/plain;charset=utf-8"}})).text();try{return JSON.parse(a)}catch{throw new Error("Server error: "+a.substring(0,100))}}function M(e){f(!1),alert(e.message||"Authentication failed")}function G(){document.body.classList.remove("is-app-view"),x.classList.remove("hidden"),g.classList.add("hidden"),L&&L.classList.remove("hidden"),w.forEach(e=>e.classList.toggle("hidden",!c)),b.forEach(e=>e.classList.toggle("hidden",!c)),B.forEach(e=>e.classList.remove("hidden")),d&&d.classList.remove("hidden"),r&&r.classList.toggle("hidden",!c),N.forEach(e=>e.classList.add("hidden")),h&&h.classList.toggle("hidden",!c)}function v(){document.body.classList.add("is-app-view"),x.classList.add("hidden"),g.classList.remove("hidden"),L&&L.classList.add("hidden"),w.forEach(e=>e.classList.add("hidden")),b.forEach(e=>e.classList.add("hidden")),B.forEach(e=>e.classList.add("hidden")),d&&d.classList.add("hidden"),r&&r.classList.toggle("hidden",!c),N.forEach(e=>e.classList.toggle("hidden",!c)),h&&h.classList.toggle("hidden",!c)}function E(e,n){c=e,h&&h.classList.toggle("hidden",!e),r&&r.classList.toggle("hidden",!e),document.querySelectorAll("[data-gsi-button]").forEach(t=>{t.classList.toggle("hidden",e)}),document.querySelectorAll("[data-auth-panel]").forEach(t=>{t.classList.toggle("hidden",e)}),C&&n&&(C.textContent=n)}function j(){if(!i)return;i.innerHTML="";const e=Array.from(document.querySelectorAll(".site-nav > *")),n=e.find(t=>t.hasAttribute("data-contrib-link"));if(n&&!n.classList.contains("hidden")){const t=n.cloneNode(!0);t.className="menu-item menu-item-strong",t.addEventListener("click",()=>{u(),v(),window.scrollTo({top:0,behavior:"smooth"})}),i.appendChild(t)}if(e.filter(t=>t!==n).forEach(t=>{const o=t.cloneNode(!0);o.className="menu-item",o.addEventListener("click",a=>{const l=o.getAttribute("href");if(l&&l.startsWith("#")){a.preventDefault();const y=document.querySelector(l);y&&y.scrollIntoView({behavior:"smooth"})}u()}),i.appendChild(o)}),c){const t=document.createElement("button");t.type="button",t.className="menu-item menu-item-logout",t.textContent="Sign out",t.addEventListener("click",()=>{s&&s.classList.remove("hidden"),u()}),i.appendChild(t)}}function u(){i&&!i.classList.contains("hidden")&&i.classList.add("hidden")}function F(e){if(!e)return"";const n=e.split(".");if(n.length<2)return"";try{return JSON.parse(atob(n[1].replace(/-/g,"+").replace(/_/g,"/"))).email||""}catch{return""}}function f(e,n){_&&(n&&A&&(A.textContent=n),_.classList.toggle("hidden",!e))}function J(){const e=document.querySelector("[data-taxonomy-list]");!e||!Array.isArray(k)||(e.innerHTML="",k.filter(n=>!n.disabled).forEach(n=>{const t=document.createElement("li"),o=document.createElement("strong");o.textContent=n.label;const a=document.createElement("p");a.textContent=n.description,t.appendChild(o),t.appendChild(a),e.appendChild(t)}))}
